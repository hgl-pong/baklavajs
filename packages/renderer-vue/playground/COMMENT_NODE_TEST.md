# Comment Node 测试指南

## 新功能说明

### 1. Header编辑功能
- 双击comment节点的header区域可以直接编辑注释文本
- 编辑时会显示输入框，支持回车键确认或失焦保存
- header显示的文字就是输入的注释内容，而不是固定的"Comment"字样

### 2. 节点容器功能
- comment节点的content区域现在是普通的节点容器
- 可以在comment节点内部放置其他节点
- 拖动comment节点时，会自动带动内部的节点一起移动
- 支持嵌套：comment节点内可以包含其他节点，实现分组功能

## 测试步骤

### 测试Header编辑
1. 在节点面板中添加一个Comment节点
2. 双击comment节点的header区域
3. 输入自定义文本，如"我的注释组"
4. 按回车键或点击其他地方完成编辑
5. 验证header显示的是输入的文本而不是"Comment"

### 测试节点拖动功能
1. 创建一个Comment节点
2. 在Comment节点的范围内添加几个其他节点（如Math节点、Test节点等）
3. 确保这些节点完全位于Comment节点的边界内
4. 拖动Comment节点
5. 验证内部的节点是否跟随Comment节点一起移动
6. 验证节点之间的相对位置保持不变

### 测试嵌套功能
1. 创建多个Comment节点
2. 将一些普通节点放在Comment节点内
3. 验证可以创建层次化的节点组织结构
4. 测试拖动不同层级的Comment节点时的行为

## 预期行为

- ✅ Header可以编辑并显示自定义文本
- ✅ 拖动Comment节点时内部节点跟随移动
- ✅ 内部节点的相对位置保持不变
- ✅ 支持多层嵌套的节点组织
- ✅ Comment节点保持在其他节点的后面（z-index较低）

## 技术实现要点

1. **Header编辑**：将编辑功能从content区域移到header，使用input替代textarea
2. **拖动同步**：监听Comment节点位置变化，计算偏移量并同步移动内部节点
3. **节点检测**：通过边界检测算法识别Comment节点范围内的其他节点
4. **状态管理**：使用Map存储拖动开始时的节点位置，拖动结束时清理